<div id="tr_carousel_41590" class="tr-wrapper">
<style>
/* CONTAINER */
#tr_carousel_41590 { font-family: 'Inter', sans-serif; color: #1f1f1f; max-width: 100%; box-sizing: border-box; background-color: #fcfcfc; padding: 20px; position: relative; }

/* HEADER & AI CARD STYLES (Aynı kaldı) */
#tr_carousel_41590 .tr-header-card { background: #fff; border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px 30px; display: flex; align-items: center; margin-bottom: 25px; }
#tr_carousel_41590 .tr-rating-big { font-size: 2.5rem; font-weight: 800; margin-right: 20px; color: #000; line-height: 1; }
#tr_carousel_41590 .tr-rating-details { display: flex; flex-direction: column; }
#tr_carousel_41590 .tr-stars-gold { color: #F27A1A; font-size: 1.25rem; letter-spacing: 2px; margin-bottom: 2px; line-height: 1; }
#tr_carousel_41590 .tr-rating-label { font-size: 0.85rem; color: #666; text-transform: uppercase; font-weight: 600; }
#tr_carousel_41590 .tr-count-text { font-size: 0.75rem; color: #999; font-weight: 500; margin-top: 2px; }
#tr_carousel_41590 .tr-ai-card { background: #f4f4f4; border-left: 5px solid #000; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
#tr_carousel_41590 .tr-ai-title { display: flex; align-items: center; font-weight: 700; font-size: 0.9rem; margin-bottom: 8px; color: #000; }

/* CAROUSEL & CARD STYLES (Aynı kaldı) */
#tr_carousel_41590 .tr-carousel-container { position: relative; overflow: hidden; padding: 10px 0; }
#tr_carousel_41590 .tr-track { display: flex; transition: transform 0.5s ease-in-out; gap: 20px; }
#tr_carousel_41590 .tr-card { 
flex: 0 0 calc(33.333% - 14px); background: #fff; border: 1px solid #eaeaea; border-radius: 16px; 
padding: 24px; display: flex; flex-direction: column; box-shadow: 0 4px 12px rgba(0,0,0,0.04); box-sizing: border-box; height: auto; min-height: 350px; 
}
@media (max-width: 768px) { #tr_carousel_41590 .tr-card { flex: 0 0 100%; } }
#tr_carousel_41590 .tr-card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 12px; }
#tr_carousel_41590 .tr-username { font-weight: 700; font-size: 0.95rem; color: #000; }
#tr_carousel_41590 .tr-date { font-size: 0.75rem; color: #888; display:block; margin-top:2px; }
#tr_carousel_41590 .tr-card-stars { color: #F27A1A; font-size: 0.9rem; }
#tr_carousel_41590 .tr-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px; }
#tr_carousel_41590 .tr-tag { background: #f7f7f7; color: #444; font-size: 0.7rem; padding: 4px 8px; border-radius: 20px; border: 1px solid #eee; font-weight: 600; }
#tr_carousel_41590 .tr-comment-text { font-size: 0.9rem; line-height: 1.6; color: #333; margin-bottom: 20px; flex-grow: 1; overflow: hidden; }

#tr_carousel_41590 .tr-nav-btn { 
position: absolute; top: 50%; transform: translateY(-50%); background: #000; color: #fff; border: none; 
width: 40px; height: 40px; border-radius: 50%; cursor: pointer; z-index: 10; display: flex; 
align-items: center; justify-content: center; font-size: 1.2rem; opacity: 0.8; transition: opacity 0.3s;
}
#tr_carousel_41590 .tr-nav-btn:hover { opacity: 1; }
#tr_carousel_41590 .tr-prev { left: 0; }
#tr_carousel_41590 .tr-next { right: 0; }
#tr_carousel_41590 .tr-nav-btn:disabled { background: #ccc; cursor: not-allowed; opacity: 0.5; }

/* GALERİ THUMBNAILS */
#tr_carousel_41590 .tr-gallery { display: flex; gap: 8px; overflow-x: auto; margin-top: auto; padding-top: 10px; }
#tr_carousel_41590 .tr-thumb { 
width: 70px; height: 70px; object-fit: cover; border-radius: 6px; border: 1px solid #ddd; 
cursor: zoom-in; transition: transform 0.2s;
}
#tr_carousel_41590 .tr-thumb:hover { transform: scale(1.05); border-color: #000; }

/* --- YENİ: GELİŞMİŞ LIGHTBOX STİLLERİ --- */
#tr_carousel_41590 .tr-lightbox-overlay {
display: none; position: fixed; z-index: 99999; left: 0; top: 0; width: 100%; height: 100%; 
background-color: rgba(0,0,0,0.9); /* Biraz daha koyu arka plan */
justify-content: center; align-items: center; flex-direction: column;
user-select: none;
}
#tr_carousel_41590 .tr-lightbox-img {
max-width: 90%; max-height: 85vh; border-radius: 4px; box-shadow: 0 5px 30px rgba(0,0,0,0.5);
transition: opacity 0.3s ease;
}
#tr_carousel_41590 .tr-close-btn {
position: absolute; top: 20px; right: 30px; color: #fff; font-size: 40px; font-weight: 300;
cursor: pointer; z-index: 100002; transition: color 0.2s;
}
#tr_carousel_41590 .tr-close-btn:hover { color: #F27A1A; }

/* Lightbox İçi Navigasyon Okları */
#tr_carousel_41590 .tr-lb-nav {
position: absolute; top: 50%; transform: translateY(-50%);
color: #fff; font-size: 50px; cursor: pointer; z-index: 100001;
padding: 10px; opacity: 0.6; transition: opacity 0.2s, transform 0.2s;
}
#tr_carousel_41590 .tr-lb-nav:hover { opacity: 1; transform: translateY(-50%) scale(1.1); }
#tr_carousel_41590 .tr-lb-prev { left: 20px; }
#tr_carousel_41590 .tr-lb-next { right: 20px; }

/* Mobilde okları biraz küçült */
@media (max-width: 768px) { #tr_carousel_41590 .tr-lb-nav { font-size: 35px; padding: 5px; } }
</style>

<div class="tr-header-card">
<div class="tr-rating-big">4.5</div>
<div class="tr-rating-details">
<div class="tr-stars-gold">★★★★☆</div>
<div class="tr-rating-label">Genel Ortalama</div>
<div class="tr-count-text"></div>
</div>
</div>

<div class="tr-carousel-container">
<button class="tr-nav-btn tr-prev" id="prev_tr_carousel_41590">&#10094;</button>
<div class="tr-track" id="track_tr_carousel_41590">

<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">B** N** s**</span>
<span class="tr-date">8 Ağustos 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 161 cm</span><span class="tr-tag">Kilo: 52 kg</span><span class="tr-tag">Beden: S</span></div>
<div class="tr-comment-text">bence çok kaliteli 3 paket yapılarak gonderılmıs benim boyum 161 kilom 55 s beden aldım üst trafından daralttırdım boyu biraz uzun geldi kestirdim kaliteli pişm
Devamını Oku</div>
<div class="tr-gallery"><img src="https://cdn.dsmcdn.com/mnresize/300/300/prod-product-review-media_1749859208957/img/2018925/2026901/2026901/942523192/11807168-1754669813581.jpeg" class="tr-thumb tr-lightbox-trigger"></div>
</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">S** G**</span>
<span class="tr-date">11 Temmuz 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 176 cm</span><span class="tr-tag">Kilo: 61 kg</span><span class="tr-tag">Beden: M</span></div>
<div class="tr-comment-text">çok hoş çok zarif görselin birebir aynısı, üst bedenim 36 alt bedenim 38 bu yüzden 38 tercih ettim, kibar bir görüntüsü var, boyum 176 ayak bileğimden iki üç pa
Devamını Oku</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">E** Y**</span>
<span class="tr-date">5 Temmuz 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 170 cm</span><span class="tr-tag">Kilo: 80 kg</span><span class="tr-tag">Beden: XL</span></div>
<div class="tr-comment-text">hiç yorum yoktu alırken çok tereddüt ettim ama bence birazda bu marka abartılsa müthiş olur sadece biraz fiyatları fazla burası biraz üzücü onun dışında gerçekt
Devamını Oku</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">B** Ş**</span>
<span class="tr-date">31 Temmuz 2025</span>
</div>
<div class="tr-card-stars">★★★★☆</div>
</div>
<div class="tr-tags"><span class="tr-tag">Beden: L</span></div>
<div class="tr-comment-text">İndirime girdi fiyatı ondan kırıyorum elbise güzel</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">Y** S**</span>
<span class="tr-date">8 Ağustos 2025</span>
</div>
<div class="tr-card-stars">★★☆☆☆</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 172 cm</span><span class="tr-tag">Kilo: 58 kg</span><span class="tr-tag">Beden: M</span></div>
<div class="tr-comment-text">Özellikle sorarak aldım M beden alın dediniz üzerimde döndü elbise çok üzüldüm yetişmeyecek iade edip kendi bedeni almaya mecbur iade</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">**** ****</span>
<span class="tr-date">19 Ağustos 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 170 cm</span><span class="tr-tag">Kilo: 73 kg</span><span class="tr-tag">Beden: L</span></div>
<div class="tr-comment-text">Harika bayıldım</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">S** K**</span>
<span class="tr-date">17 Kasım 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 155 cm</span><span class="tr-tag">Kilo: 47 kg</span><span class="tr-tag">Beden: S</span></div>
<div class="tr-comment-text">Çok harika bir elbise. Tavsiye ederim</div>

</div>
<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">Y** K**</span>
<span class="tr-date">16 Ekim 2025</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Boy: 160 cm</span><span class="tr-tag">Kilo: 55 kg</span><span class="tr-tag">Beden: S</span></div>
<div class="tr-comment-text">Çok güzel beğendim</div>
<div class="tr-gallery"><img src="https://cdn.dsmcdn.com/mnresize/300/300/prod-product-review-media-migrated_1755700289924/img/2018925/2028895/2034877/942523192/12116368-1760623977721.jpeg" class="tr-thumb tr-lightbox-trigger"></div>
</div>
</div>
<button class="tr-nav-btn tr-next" id="next_tr_carousel_41590">&#10095;</button>
</div>

<div id="lightbox_tr_carousel_41590" class="tr-lightbox-overlay">
<span class="tr-close-btn" id="close_tr_carousel_41590">&times;</span>
<span class="tr-lb-nav tr-lb-prev" id="lb_prev_tr_carousel_41590">&#10094;</span>
<img class="tr-lightbox-img" id="img_tr_carousel_41590" src=">
<span class="tr-lb-nav tr-lb-next" id="lb_next_tr_carousel_41590">&#10095;</span>
</div>

<script>
(function() {
// --- CAROUSEL LOGIC (Eski kodun aynısı) ---
const track = document.getElementById('track_tr_carousel_41590');
const prevBtn = document.getElementById('prev_tr_carousel_41590');
const nextBtn = document.getElementById('next_tr_carousel_41590');
let currentIndex = 0;
function updateCarousel() {
if(!track) return; const card = track.querySelector('.tr-card'); if(!card) return;
const cardWidth = card.offsetWidth; const gap = 20; 
const moveAmount = (cardWidth + gap) * currentIndex;
track.style.transform = `translateX(-${moveAmount}px)`;
prevBtn.disabled = currentIndex === 0;
const cardsToShow = window.innerWidth <= 768 ? 1 : 3;
const totalCards = track.children.length;
nextBtn.disabled = currentIndex >= totalCards - cardsToShow;
}
if(nextBtn) nextBtn.addEventListener('click', () => {
const cardsToShow = window.innerWidth <= 768 ? 1 : 3;
if (currentIndex < track.children.length - cardsToShow) { currentIndex++; updateCarousel(); }
});
if(prevBtn) prevBtn.addEventListener('click', () => {
if (currentIndex > 0) { currentIndex--; updateCarousel(); }
});
window.addEventListener('resize', updateCarousel);
window.addEventListener('load', updateCarousel);
setTimeout(updateCarousel, 500);

// --- YENİ: GELİŞMİŞ LIGHTBOX GALERİ LOGIC ---
const lightbox = document.getElementById('lightbox_tr_carousel_41590');
const lightboxImg = document.getElementById('img_tr_carousel_41590');
const closeBtn = document.getElementById('close_tr_carousel_41590');
const lbPrevBtn = document.getElementById('lb_prev_tr_carousel_41590');
const lbNextBtn = document.getElementById('lb_next_tr_carousel_41590');

// Tüm küçük resimleri (thumbnail) seç
const triggers = document.querySelectorAll('#tr_carousel_41590 .tr-lightbox-trigger');

// Tüm resimlerin kaynaklarını (src) bir listeye at
let lightboxImages = [];
triggers.forEach(img => lightboxImages.push(img.src));

let currentLightboxIndex = 0;

// Resmi güncelleme fonksiyonu
function updateLightboxImage() {
// Fade efekti için önce opaklığı düşür
lightboxImg.style.opacity = '0.5';
setTimeout(() => {
lightboxImg.src = lightboxImages[currentLightboxIndex];
lightboxImg.style.opacity = '1';
}, 150);

// Eğer sadece 1 resim varsa okları gizle
if(lightboxImages.length <= 1) {
lbPrevBtn.style.display = 'none'; lbNextBtn.style.display = 'none';
} else {
lbPrevBtn.style.display = 'block'; lbNextBtn.style.display = 'block';
}
}

// Thumbnaillere tıklama olayını ekle (İndeks takibi ile)
triggers.forEach((img, index) => {
img.addEventListener('click', () => {
lightbox.style.display = 'flex';
currentLightboxIndex = index; // Tıklanan resmin sırasını al
updateLightboxImage();
});
});

// Sağ Ok (İleri)
if(lbNextBtn) {
lbNextBtn.addEventListener('click', (e) => {
e.stopPropagation(); // Overlay'in kapanmasını engelle
currentLightboxIndex = (currentLightboxIndex + 1) % lightboxImages.length; // Döngüsel artış
updateLightboxImage();
});
}

// Sol Ok (Geri)
if(lbPrevBtn) {
lbPrevBtn.addEventListener('click', (e) => {
e.stopPropagation();
// Döngüsel azalış (Negatif değerden kaçınmak için + length eklenir)
currentLightboxIndex = (currentLightboxIndex - 1 + lightboxImages.length) % lightboxImages.length;
updateLightboxImage();
});
}

// Kapatma Fonksiyonları
function closeLightbox() { lightbox.style.display = 'none'; }
if(closeBtn) closeBtn.addEventListener('click', closeLightbox);
if(lightbox) lightbox.addEventListener('click', (e) => {
if(e.target === lightbox) closeLightbox(); // Sadece siyah alana tıklanınca kapat
});

// Klavye Kontrolü (Opsiyonel: Sağ/Sol tuşları ile gezinme)
document.addEventListener('keydown', (e) => {
if(lightbox.style.display === 'flex') {
if(e.key === 'ArrowRight') lbNextBtn.click();
if(e.key === 'ArrowLeft') lbPrevBtn.click();
if(e.key === 'Escape') closeLightbox();
}
});

})();
</script>
</div>