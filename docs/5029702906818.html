<div id="tr_carousel_59781" class="tr-wrapper">
<style>
/* CONTAINER */
#tr_carousel_59781 { font-family: 'Inter', sans-serif; color: #1f1f1f; max-width: 100%; box-sizing: border-box; background-color: #fcfcfc; padding: 20px; position: relative; }

/* HEADER */
#tr_carousel_59781 .tr-header-card { background: #fff; border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px 30px; display: flex; align-items: center; margin-bottom: 25px; }
#tr_carousel_59781 .tr-rating-big { font-size: 2.5rem; font-weight: 800; margin-right: 20px; color: #000; line-height: 1; }
#tr_carousel_59781 .tr-rating-details { display: flex; flex-direction: column; }
#tr_carousel_59781 .tr-stars-gold { color: #F27A1A; font-size: 1.25rem; letter-spacing: 2px; margin-bottom: 2px; line-height: 1; }
#tr_carousel_59781 .tr-rating-label { font-size: 0.85rem; color: #666; text-transform: uppercase; font-weight: 600; }
#tr_carousel_59781 .tr-count-text { font-size: 0.75rem; color: #999; font-weight: 500; margin-top: 2px; }

/* AI CARD */
#tr_carousel_59781 .tr-ai-card { background: #f4f4f4; border-left: 5px solid #000; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
#tr_carousel_59781 .tr-ai-title { display: flex; align-items: center; font-weight: 700; font-size: 0.9rem; margin-bottom: 8px; color: #000; }

/* CAROUSEL */
#tr_carousel_59781 .tr-carousel-container { position: relative; overflow: hidden; padding: 10px 0; }
#tr_carousel_59781 .tr-track { display: flex; transition: transform 0.5s ease-in-out; gap: 20px; }

#tr_carousel_59781 .tr-card { 
flex: 0 0 calc(33.333% - 14px); background: #fff; border: 1px solid #eaeaea; border-radius: 16px; 
padding: 24px; display: flex; flex-direction: column; box-shadow: 0 4px 12px rgba(0,0,0,0.04); box-sizing: border-box; height: auto; min-height: 350px; 
}
@media (max-width: 768px) { #tr_carousel_59781 .tr-card { flex: 0 0 100%; } }

#tr_carousel_59781 .tr-card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 12px; }
#tr_carousel_59781 .tr-username { font-weight: 700; font-size: 0.95rem; color: #000; }
#tr_carousel_59781 .tr-date { font-size: 0.75rem; color: #888; display:block; margin-top:2px; }
#tr_carousel_59781 .tr-card-stars { color: #F27A1A; font-size: 0.9rem; }
#tr_carousel_59781 .tr-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px; }
#tr_carousel_59781 .tr-tag { background: #f7f7f7; color: #444; font-size: 0.7rem; padding: 4px 8px; border-radius: 20px; border: 1px solid #eee; font-weight: 600; }
#tr_carousel_59781 .tr-comment-text { font-size: 0.9rem; line-height: 1.6; color: #333; margin-bottom: 20px; flex-grow: 1; overflow: hidden; }

/* Carousel Buttons */
#tr_carousel_59781 .tr-nav-btn { 
position: absolute; top: 50%; transform: translateY(-50%); background: #000; color: #fff; border: none; 
width: 40px; height: 40px; border-radius: 50%; cursor: pointer; z-index: 10; display: flex; 
align-items: center; justify-content: center; font-size: 1.2rem; opacity: 0.8; transition: opacity 0.3s;
}
#tr_carousel_59781 .tr-nav-btn:hover { opacity: 1; }
#tr_carousel_59781 .tr-prev { left: 0; }
#tr_carousel_59781 .tr-next { right: 0; }
#tr_carousel_59781 .tr-nav-btn:disabled { background: #ccc; cursor: not-allowed; opacity: 0.5; }

/* Thumbnails */
#tr_carousel_59781 .tr-gallery { display: flex; gap: 8px; overflow-x: auto; margin-top: auto; padding-top: 10px; }
#tr_carousel_59781 .tr-thumb { 
width: 70px; height: 70px; object-fit: cover; border-radius: 6px; border: 1px solid #ddd; 
cursor: zoom-in; transition: transform 0.2s;
}
#tr_carousel_59781 .tr-thumb:hover { transform: scale(1.05); border-color: #000; }

/* --- LIGHTBOX (NAVİGASYON DÜZELTİLDİ) --- */
#tr_carousel_59781 .tr-lightbox-overlay {
display: none; position: fixed; z-index: 99999; left: 0; top: 0; width: 100%; height: 100%; 
background-color: rgba(0,0,0,0.9);
justify-content: center; align-items: center; flex-direction: column;
user-select: none;
}
#tr_carousel_59781 .tr-lightbox-img {
max-width: 90%; max-height: 85vh; border-radius: 4px; box-shadow: 0 5px 30px rgba(0,0,0,0.5);
transition: opacity 0.3s ease; position: relative; z-index: 100000;
}
#tr_carousel_59781 .tr-close-btn {
position: absolute; top: 20px; right: 30px; color: #fff; font-size: 40px; font-weight: 300;
cursor: pointer; z-index: 100002; transition: color 0.2s;
}
#tr_carousel_59781 .tr-close-btn:hover { color: #F27A1A; }

/* Lightbox Okları (Daha belirgin hale getirildi) */
#tr_carousel_59781 .tr-lb-nav {
position: absolute; top: 50%; transform: translateY(-50%);
color: #fff; font-size: 30px; cursor: pointer; z-index: 100002; /* En üstte */
width: 50px; height: 50px; background: rgba(255,255,255,0.15); /* Hafif arka plan */
border-radius: 50%; display: flex; align-items: center; justify-content: center;
transition: all 0.2s;
}
#tr_carousel_59781 .tr-lb-nav:hover { background: rgba(255,255,255,0.4); transform: translateY(-50%) scale(1.1); }

#tr_carousel_59781 .tr-lb-prev { left: 30px; }
#tr_carousel_59781 .tr-lb-next { right: 30px; }

@media (max-width: 768px) { 
#tr_carousel_59781 .tr-lb-nav { width: 40px; height: 40px; font-size: 24px; }
#tr_carousel_59781 .tr-lb-prev { left: 10px; }
#tr_carousel_59781 .tr-lb-next { right: 10px; }
}
</style>

<div class="tr-header-card">
<div class="tr-rating-big">5</div>
<div class="tr-rating-details">
<div class="tr-stars-gold">★★★★★</div>
<div class="tr-rating-label">Genel Ortalama</div>
<div class="tr-count-text">1 Değerlendirme 1 Yorum</div>
</div>
</div>

<div class="tr-carousel-container">
<button class="tr-nav-btn tr-prev" id="prev_tr_carousel_59781">&#10094;</button>
<div class="tr-track" id="track_tr_carousel_59781">

<div class="tr-card">
<div class="tr-card-top">
<div class="tr-user-info">
<span class="tr-username">s** h** r**</span>
<span class="tr-date">14 Aralık 2023</span>
</div>
<div class="tr-card-stars">★★★★★</div>
</div>
<div class="tr-tags"><span class="tr-tag">Beden: S</span></div>
<div class="tr-comment-text">en sevdiklerim.. her renginin bedeni olsa ger rengini alırım.. etek boyunu düzenledikten sonra mutlulukla giyiyorum.. şık ve uygun fiyat.. teşekkürler Swass</div>
<div class="tr-gallery"><img src="https://cdn.dsmcdn.com/mnresize/300/300/prod-migrated-product-review-media_1756760527960/img/2016931/2028895/2030889/59299325/89682672-1702535888448.jpeg" class="tr-thumb tr-lightbox-trigger"><img src="https://cdn.dsmcdn.com/mnresize/300/300/prod-migrated-product-review-media_1756776128103/img/2016931/2028895/2030889/59299325/89682672-1702535888709.jpeg" class="tr-thumb tr-lightbox-trigger"></div>
</div>
</div>
<button class="tr-nav-btn tr-next" id="next_tr_carousel_59781">&#10095;</button>
</div>

<div id="lightbox_tr_carousel_59781" class="tr-lightbox-overlay">
<span class="tr-close-btn" id="close_tr_carousel_59781">&times;</span>
<div class="tr-lb-nav tr-lb-prev" id="lb_prev_tr_carousel_59781">&#10094;</div>
<img class="tr-lightbox-img" id="img_tr_carousel_59781" src=">
<div class="tr-lb-nav tr-lb-next" id="lb_next_tr_carousel_59781">&#10095;</div>
</div>

<script>
(function() {
// CAROUSEL
const track = document.getElementById('track_tr_carousel_59781');
const prevBtn = document.getElementById('prev_tr_carousel_59781');
const nextBtn = document.getElementById('next_tr_carousel_59781');
let currentIndex = 0;
function updateCarousel() {
if(!track) return; const card = track.querySelector('.tr-card'); if(!card) return;
const cardWidth = card.offsetWidth; const gap = 20; 
const moveAmount = (cardWidth + gap) * currentIndex;
track.style.transform = `translateX(-${moveAmount}px)`;
prevBtn.disabled = currentIndex === 0;
const cardsToShow = window.innerWidth <= 768 ? 1 : 3;
const totalCards = track.children.length;
nextBtn.disabled = currentIndex >= totalCards - cardsToShow;
}
if(nextBtn) nextBtn.addEventListener('click', () => {
const cardsToShow = window.innerWidth <= 768 ? 1 : 3;
if (currentIndex < track.children.length - cardsToShow) { currentIndex++; updateCarousel(); }
});
if(prevBtn) prevBtn.addEventListener('click', () => {
if (currentIndex > 0) { currentIndex--; updateCarousel(); }
});
window.addEventListener('resize', updateCarousel);
window.addEventListener('load', updateCarousel);
setTimeout(updateCarousel, 500);

// --- LIGHTBOX JS ---
const lightbox = document.getElementById('lightbox_tr_carousel_59781');
const lightboxImg = document.getElementById('img_tr_carousel_59781');
const closeBtn = document.getElementById('close_tr_carousel_59781');
const lbPrevBtn = document.getElementById('lb_prev_tr_carousel_59781');
const lbNextBtn = document.getElementById('lb_next_tr_carousel_59781');

// Resim listesi ve indeks
const triggers = document.querySelectorAll('#tr_carousel_59781 .tr-lightbox-trigger');
let lightboxImages = [];
triggers.forEach(img => lightboxImages.push(img.src));
let currentLightboxIndex = 0;

function updateLightboxImage() {
lightboxImg.style.opacity = '0.5';
setTimeout(() => {
lightboxImg.src = lightboxImages[currentLightboxIndex];
lightboxImg.style.opacity = '1';
}, 150);

// Tek resim varsa okları gizle
if(lightboxImages.length <= 1) {
lbPrevBtn.style.display = 'none'; lbNextBtn.style.display = 'none';
} else {
lbPrevBtn.style.display = 'flex'; lbNextBtn.style.display = 'flex';
}
}

triggers.forEach((img, index) => {
img.addEventListener('click', () => {
lightbox.style.display = 'flex';
currentLightboxIndex = index;
updateLightboxImage();
});
});

if(lbNextBtn) {
lbNextBtn.addEventListener('click', (e) => {
e.stopPropagation();
currentLightboxIndex = (currentLightboxIndex + 1) % lightboxImages.length;
updateLightboxImage();
});
}

if(lbPrevBtn) {
lbPrevBtn.addEventListener('click', (e) => {
e.stopPropagation();
currentLightboxIndex = (currentLightboxIndex - 1 + lightboxImages.length) % lightboxImages.length;
updateLightboxImage();
});
}

function closeLightbox() { lightbox.style.display = 'none'; }
if(closeBtn) closeBtn.addEventListener('click', closeLightbox);
if(lightbox) lightbox.addEventListener('click', (e) => {
if(e.target === lightbox) closeLightbox();
});

document.addEventListener('keydown', (e) => {
if(lightbox.style.display === 'flex') {
if(e.key === 'ArrowRight') lbNextBtn.click();
if(e.key === 'ArrowLeft') lbPrevBtn.click();
if(e.key === 'Escape') closeLightbox();
}
});

})();
</script>
</div>